<!DOCTYPE html>
<html
    lang="en-GB">
    <head>

        <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script> <meta
            charset="UTF-8" /><meta
            name="viewport" content="width=device-width, initial-scale=1">

        <script>

            var url = 'https://silent-fire-4c34.inclind.workers.dev/';

            $('#getLeagueData').on('click', function(){
                $('#loadingChart').slideDown();
                var leagueId = $('#leagueId').val()
                google.charts.load('current', {packages: ['corechart']});
                google.charts.setOnLoadCallback(drawPlayerChart);

            function drawPlayerChart() {
                var playerChart = new google.visualization.DataTable();
                var leagueLength = 0;

                var options = {
                    animation:{
                        duration: 1000,
                        startup: true,
                    },
                    hAxis: {
                        title: 'Gameweeks',
                        
                    },
                    vAxis: {
                        title: 'Score',
                        gridlines: true,
                    },
                    series: {
                        1: {curveType: 'function'},
                        states: {
                            hover: {
                                enabled: true,
                                lineWidth: 5
                            }
                        },

                    },
                    'width':'100%',
                    'height':800,
                    lineWidth: 1,
                    legend: { textStyle: {fontSize: 12},
                        cursor: 'pointer',
                    },
                    'curveType': 'function',
                    'pointSize': 7,
                    'crosshair': {
                        trigger: 'none'
                    }

                    };


                var gw1 = ['Week 1'];
                var gw2 = ['Week 2'];
                var gw3 = ['3'];
                var gw4 = ['4'];
                var gw5 = ['5'];
                var gw6 = ['6'];
                var gw7 = ['7'];
                var gw8 = ['8'];
                var gw9 = ['9'];
                var gw10 = ['10'];
                var gw11= ['11'];
                var gw12 = ['12'];
                var gw13 = ['13'];
                var gw14 = ['14'];
                var gw15 = ['15'];
                var gw16 = ['16'];
                var gw17 = ['17'];
                var gw18 = ['18'];
                var gw19 = ['19'];
                var gw20 = ['20'];
                var gw21 = ['21'];
                var gw22 = ['22'];
                var gw23 = ['23'];
                var gw24 = ['24'];
                var gw25 = ['25'];
                var gw26 = ['26'];
                var gw27 = ['27'];
                var gw28 = ['28'];
                var gw29 = ['29'];
                var gw30 = ['30'];
                var gw31 = ['31'];
                var gw32 = ['32'];
                var gw33 = ['33'];
                var gw34 = ['34'];
                var gw35 = ['35'];
                var gw36 = ['36'];
                var gw37 = ['37'];
                var gw38 = ['38'];

                var playerIds = [];


                $.ajax({
                    url:url, data:{url:'https://fantasy.premierleague.com/drf/leagues-classic-standings/' + leagueId + '?phase=1'}, 
                    success:function(data){
            console.log(data);
                    //build the chart Y axes
                    playerChart.addColumn('string', 'X');

                    var players = data.standings.results;
                    players.forEach(function(player){
                        playerChart.addColumn('number', player.player_name)
                        playerIds.push(player.entry);
                    })
                    }
                }).done(function(){

                        $(this).unbind("ajaxStop");
                        leagueLength = playerIds.length;
                        console.log(leagueLength);

                        var fish = $.each(playerIds, function(i, val){

                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/1/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw1.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/2/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw2.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/3/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw3.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/4/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw4.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/5/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw5.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/6/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw6.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/7/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw7.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/8/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw8.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/9/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw9.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/10/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw10.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/11/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw11.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/12/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw12.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/13/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw13.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/14/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw14.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/15/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw15.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/16/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw16.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/17/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw17.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/18/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw18.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/19/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw19.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/20/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw20.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/21/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw21.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/22/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw22.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/23/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw23.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/24/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw24.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/25/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw25.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/26/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw26.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/27/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw27.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/28/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw28.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/29/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw29.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/30/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw30.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/31/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw31.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/32/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw32.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/33/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw33.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/34/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw34.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/35/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw35.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/36/picks'},
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw36.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/37/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw37.push(points)
                                }
                            })
                        $.ajax({
                            url:url, data:{url:'https://fantasy.premierleague.com/drf/entry/'+val+'/event/38/picks'}, 
                            success:function(data){
                                points = data.entry_history.total_points;
                                gw38.push(points)
                                }
                            })

                        })
                        
                    
                })

                $(document).ajaxStop(function(){
                        $(this).unbind("ajaxStop");

                        useThese = [];
                        allWeeks = [gw1, gw2, gw3, gw4, gw5, gw6, gw7, gw8, gw9, gw10, gw11, gw12, gw13, gw14, gw15, gw16, gw17, gw18, 
                                    gw19, gw20, gw21, gw22, gw23, gw24, gw25, gw26, gw27, gw28, gw29, gw30, gw31, gw32, gw33, gw34, gw35,
                                    gw36, gw37, gw38];

                        for (i=0;i<allWeeks.length;i++){
                            if (allWeeks[i].length == leagueLength+1){
                            useThese.push(allWeeks[i]);
                            }
                        }

                        console.log(useThese);

                        playerChart.addRows(useThese);
                        var chart = new google.visualization.LineChart(document.getElementById('player_chart_div'));
                        chart.draw(playerChart, options);
            $('#loadingChart').slideUp();
                            google.visualization.events.addListener(chart, 'select', function () {
                                
                                            });
                            })

                    
                
                } 

            //the click
            })
        </script> 

        <title>FPl Mini-league stats | GameChange</title><meta
            name='robots' content='max-image-preview:large' />
        


        <script type='text/javascript'
            id='smartline-lite-jquery-navigation-js-extra'>/*  */
            var smartline_menu_title = "Menu";
            /*  */
        </script> 

    </head>
    <body
        data-rsssl=1 class="page-template page-template-template-fullwidth
        page-template-template-fullwidth-php page page-id-4001 do-etfw">

        <header
            id="header" class="clearfix" role="banner">
        </header>

        <section
            id="content-full" class="clearfix" role="main">
            <div
                id="post-4001" class="post-4001 page type-page
                status-publish has-post-thumbnail hentry
                category-fantasy-football tag-fantasy-premier-league
                tag-fpl tag-fpl-stats tag-sports">

                <h1 class="page-title">FPL Mini-league Stats</h1>
                
                <div
                    class="entry clearfix">
                    <p>
                        <script
                            src="https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react.js"></script>
                        <script
                            src="https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react-dom.js"></script>
                        <script
                            src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
                    </p>
                    <p>This
                        Fantasy Premier League Tool gives you a load of
                        interesting stats about your MiniLeague, from
                        who&#8217;s scored the most goals to who&#8217;s
                        benched the most points!</p>
                    <p>Ever wondered
                        how many clean sheets your team has amassed
                        compared to your rivals? Or who&#8217;s scored
                        the most own goals?</p>
                    <p>Enter your league ID
                        in the field below (click on a league and
                        it&#8217;s in the URL!) and find out these
                        interesting tidbits, and more!</p>

                    <div id="root" style="width: 100%;">
                        <div data-reactroot="">
                            <div class="input-group mb-3" style="text-align: center;"><input type="text" class="mainInput" value="">
                                <div class="input-group-append"><button type="button" class="whatifButton btn btn-outline-secondary"
                                        disabled=""
                                        style="cursor: pointer; background-color: darkred; color: white; border: 0px; margin: 0px auto; height: 38px;">
                                        Calculate</button></div>
                            </div>
                            <span></span>
                        </div>
                    </div>

                    <pre>
                        <script type="text/babel">
                        var WhatIf = React.createClass({

                        getInitialState: function () {
                            return {
                                coreData: '',
                                currentWeek: '',
                                leagueId: '',
                                arrayOfScores: [],
                                leagueLength: 0,
                                loading: false,
                                historyData: [],
                                pointsLeader: '',
                                valueLeader: '',
                                transfersLeader: '',
                                scoredLeader: '',
                                assistsLeader: '',
                                bonusLeader: '',
                                clean_sheetsLeader: '',
                                goals_concededLeader: '',
                                minutesLeader: '',
                                own_goalsLeader: '',
                                penalties_missedLeader: '',
                                red_cardsLeader: '',
                                savesLeader: '',
                                yellow_cardsLeader: '',
                                benchPointsLeader: '',
                                allWinners: [],
                            }
                        },

                        handleChange(event) {

                            this.setState({
                                leagueId: event.target.value,
                            });
                        },

                        componentDidMount() {
                            fetch("https://silent-fire-4c34.inclind.workers.dev/https://fantasy.premierleague.com/api/bootstrap-static/", {
                                headers: {
                                    'x-requested-with': 'testing',
                                },
                            })
                                .then(response => response.json())
                                .then(
                                    (result) => {
                                        console.log(result);
                                        let currentWeek = 1;
                                        let events = result.events;
                                        events.forEach(function (element) {
                                            if (element.finished === true) {
                                                currentWeek = element.id;
                                            }
                                        });

                                    this.setState({
                                            coreData: result.elements,
                                            currentWeek: currentWeek,
                                        })
                                    })
                                    .then(
                                        (result) => {
                                            this.historyArray = [];
                                            for (var i = 1; i < 38; i++) {
                                                fetch("https://silent-fire-4c34.inclind.workers.dev/https://fantasy.premierleague.com/api/event/" + i + "/live/", {
                                                    headers: {
                                                        'x-requested-with': 'testing',
                                                    },
                                                })
                                                    .then(res => res.json())
                                                    .then(
                                                        (result) => {
                                                            //result = result.contents;
                                                            this.historyArray.push(result.elements);
                                                        }
                                                    )
                                                    .then(
                                                        (result) => {
                                                            if (this.historyArray.length >= 37) {
                                                                //get rid of empty arrays from array
                                                                this.historyArray = this.historyArray.filter(function (el) { return el.length > 0 });
                                                                //an array of every players performance in each gameweek.
                                                                this.setState({
                                                                    historyData: this.historyArray
                                                                })
                                                            }
                                                        }
                                                    )
                                            }
                                        }
                                    )
                            },

                            onButtonClick() {
                                let varItems = '';
                                this.tempArray = [];
                                this.leagueName = ''
                                this.allScores = [];
                                this.setState({
                                    loading: true,
                                    arrayOfScores: []
                                })


                                fetch("https://silent-fire-4c34.inclind.workers.dev/https://fantasy.premierleague.com/api/leagues-classic/" + this.state.leagueId + "/standings/", {
                                        headers: {
                                            'x-requested-with': 'testing',
                                        },
                                    })
                                    .then(res => res.json())
                                    .then(
                                        response => {
                                            //response = response.contents;
                                            varItems = response.standings.results;
                                            varItems = varItems.slice(0, 50);
                                            this.leagueName = response.league.name;
                                            for (var i = 0; i < varItems.length; i++) {
                                                this.tempArray.push(varItems[i].entry)
                                            }
                                            this.setState({
                                                leagueLength: this.tempArray.length
                                            })
                                        },
                                    ).then(
                                        response => {

                                            const whatIfForTeam = this.whatIfForTeam;
                                            const tempArray = this.tempArray;

                                            tempArray.forEach(function (listItem, index) {
                                                whatIfForTeam(listItem);
                                            });

                                        }
                                    )
                            },

                        onSort(event, sortKey) {
                            const data = this.state.arrayOfScores;
                            data.sort((a, b) => b[sortKey] - a[sortKey])
                            this.setState({ data })
                        },

                        whatIfForTeam(teamId) {

                            let playerName = '';
                            let varItems = ''
                            let tempArray = [];
                            this.state.playerArray = [];
                            let outfieldscore = '';

                            const url = 'https://silent-fire-4c34.inclind.workers.dev/';

                            let goalsScored = 0;
                            let assists = 0;
                            let bps = 0;
                            let conceded = 0;
                            let minutes = 0;
                            let ownGoals = 0;
                            let penaltiesMissed = 0;
                            let penaltiesSaved = 0;
                            let redCards = 0;
                            let saves = 0;
                            let yellows = 0;
                            let cleanSheets = 0;
                            let benchPoints = 0;
                            let thisTeam = '';

                            for (let b = 1; b <= this.state.historyData.length; b++) {
                                Promise.all([
                                    fetch("https://silent-fire-4c34.inclind.workers.dev/https://fantasy.premierleague.com/api/entry/" + teamId + "/"),
                                    fetch("https://silent-fire-4c34.inclind.workers.dev/https://fantasy.premierleague.com/api/entry/" + teamId + "/history/"),
                                    fetch("https://silent-fire-4c34.inclind.workers.dev/https://fantasy.premierleague.com/api/entry/" + teamId + "/event/" + b + "/picks/")
                                ])
                                    //  fetch(url + "?csurl=https://fantasy.premierleague.com/api/entry/" + teamId +"/")
                                    .then(([res1, res2, res3]) => Promise.all([res1.json(), res2.json(), res3.json()]))
                                    .then(
                                        ([res1, res2, res3]) => {

                                            //res1 = res1.contents;
                                            //res2 = res2.contents;
                                            //res3 = res3.contents;

                                            let counter = 0;
                                            let location = b - 1;
                                            for (var q = 0; q < 11; q++) {
                                                if (this.state.historyData[location] && this.state.historyData[location].length && res3.picks && res3.picks[q]) {
                                                    let thisPlayer = res3.picks[q].element - 1;
                                                    let playerEntry = this.state.historyData[location][thisPlayer];
                                                    if (playerEntry && playerEntry.stats) {
                                                        let thisPlayerData = playerEntry.stats;

                                                        goalsScored += thisPlayerData.goals_scored;
                                                        bps += thisPlayerData.bonus;
                                                        conceded += thisPlayerData.goals_conceded;
                                                        minutes += thisPlayerData.minutes;
                                                        ownGoals += thisPlayerData.own_goals;
                                                        penaltiesMissed += thisPlayerData.penalties_missed;
                                                        penaltiesSaved += thisPlayerData.penalties_saved;
                                                        redCards += thisPlayerData.red_cards;
                                                        saves += thisPlayerData.saves;
                                                        yellows += thisPlayerData.yellow_cards;
                                                        cleanSheets += thisPlayerData.clean_sheets;
                                                        assists += thisPlayerData.assists;
                                                    }
                                                }
                                                counter = counter + 1;
                                            }

                                            if (b == this.state.historyData.length && counter == 11) {
                                                var teamName = res1.player_first_name + ' ' + res1.player_last_name;
                                                var points = res1.summary_overall_points;
                                                var value = res1.last_deadline_value / 10;
                                                var transfers = res1.last_deadline_total_transfers;

                                                var benchPoints = 0;

                                                var res2Weeklies = res2.current;

                                                res2Weeklies.forEach(element => benchPoints += element.points_on_bench);

                                                thisTeam = {
                                                    teamName: teamName,
                                                    points,
                                                    value,
                                                    transfers,
                                                    team: teamId,
                                                    scored: goalsScored,
                                                    assists: assists,
                                                    bonus: bps,
                                                    clean_sheets: cleanSheets,
                                                    goals_conceded: conceded,
                                                    minutes: minutes,
                                                    own_goals: ownGoals,
                                                    penalties_missed: penaltiesMissed,
                                                    penalties_saved: penaltiesSaved,
                                                    red_cards: redCards,
                                                    saves: saves,
                                                    yellow_cards: yellows,
                                                    benchPoints: benchPoints
                                                }


                                                this.setState({ loading: false, arrayOfScores: [...this.state.arrayOfScores, thisTeam] })

                                            }
                                        }
                                    ).then(
                                        (result) => {
                                            if (this.state.leagueLength == this.state.arrayOfScores.length) {
                                                console.log(this.state.arrayOfScores);
                                                var a = this.state.arrayOfScores;
                                                var points = Math.max(...a.map(o => o.points));
                                                var value = Math.max(...a.map(o => o.value));
                                                var transfers = Math.max(...a.map(o => o.transfers));
                                                var scored = Math.max(...a.map(o => o.scored));
                                                var assists = Math.max(...a.map(o => o.assists));
                                                var bonus = Math.max(...a.map(o => o.bonus));
                                                var clean_sheets = Math.max(...a.map(o => o.clean_sheets));
                                                var goals_conceded = Math.max(...a.map(o => o.goals_conceded));
                                                var minutes = Math.max(...a.map(o => o.minutes));
                                                var own_goals = Math.max(...a.map(o => o.own_goals));
                                                var penalties_missed = Math.max(...a.map(o => o.penalties_missed));
                                                var red_cards = Math.max(...a.map(o => o.red_cards));
                                                var saves = Math.max(...a.map(o => o.saves));
                                                var yellow_cards = Math.max(...a.map(o => o.yellow_cards));
                                                var benchPoints = Math.max(...a.map(o => o.benchPoints));
                                                //put them all into an array of objects and setstate with this one object

                                                this.setState({
                                                    benchPointsLeader: a.find(function (o) { return o.benchPoints == benchPoints; }),
                                                    yellow_cardsLeader: a.find(function (o) { return o.yellow_cards == yellow_cards; }),
                                                    savesLeader: a.find(function (o) { return o.saves == saves; }),
                                                    red_cardsLeader: a.find(function (o) { return o.red_cards == red_cards; }),
                                                    penalties_missedLeader: a.find(function (o) { return o.penalties_missed == penalties_missed; }),
                                                    own_goalsLeader: a.find(function (o) { return o.own_goals == own_goals; }),
                                                    minutesLeader: a.find(function (o) { return o.minutes == minutes; }),
                                                    goals_concededLeader: a.find(function (o) { return o.goals_conceded == goals_conceded; }),
                                                    clean_sheetsLeader: a.find(function (o) { return o.clean_sheets == clean_sheets; }),
                                                    bonusLeader: a.find(function (o) { return o.bonus == bonus; }),
                                                    assistsLeader: a.find(function (o) { return o.assists == assists; }),
                                                    scoredLeader: a.find(function (o) { return o.scored == scored; }),
                                                    transfersLeader: a.find(function (o) { return o.transfers == transfers; }),
                                                    valueLeader: a.find(function (o) { return o.value == value; }),
                                                    pointsLeader: a.find(function (o) { return o.points == points; }),
                                                });
                                            }
                                        }
                                    )
                            }
                        },

                        render() {
                            const { error, arrayOfScores, currentWeek, leagueLength, loading,
                                pointsLeader,
                                valueLeader,
                                transfersLeader,
                                scoredLeader,
                                assistsLeader,
                                bonusLeader,
                                clean_sheetsLeader,
                                goals_concededLeader,
                                minutesLeader,
                                own_goalsLeader,
                                penalties_missedLeader,
                                red_cardsLeader,
                                savesLeader,
                                yellow_cardsLeader,
                                benchPointsLeader, historyData } = this.state;
                            if (error) {
                                return <div>Error: {error.message}</div>;
                            } else {
                                return (
                                    <div>
                                        <div className="input-group mb-3" style={{ textAlign: 'center' }}>
                                            <input type="text" className={"mainInput"} value={this.state.leagueId} onChange={this.handleChange} />
                                            <div className="input-group-append">
                                                <button type="button"
                                                    onClick={() => { this.onButtonClick(); }}
                                                    style={{ cursor: 'pointer', backgroundColor: 'darkred', color: 'white', border: '0px', margin: '0 auto', height: '38px' }}
                                                    className={'whatifButton btn btn-outline-secondary'}
                                                    disabled={!historyData.length >= currentWeek}
                                                > Calculate
                                                </button>
                                            </div>
                                        </div>
                                        {loading ? <p>Loading...</p> : <span></span>}

                                        {arrayOfScores.length > 1 && arrayOfScores.length >= leagueLength &&
                                            <div style={{ textAlign: 'center' }}>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Points Benched</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{benchPointsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{benchPointsLeader.benchPoints} points</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Points</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{pointsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{pointsLeader.points} points</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Highest Value</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{valueLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>Â£{valueLeader.value}m</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Transfers</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{transfersLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{transfersLeader.transfers}</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Goals</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{scoredLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{scoredLeader.scored}</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Assists</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{assistsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{assistsLeader.assists}</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Bonus Points</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{bonusLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{bonusLeader.bonus} points</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Clean Sheets</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{clean_sheetsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{clean_sheetsLeader.clean_sheets}</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Goals Conceded</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{goals_concededLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{goals_concededLeader.goals_conceded}</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Minutes</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{minutesLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{minutesLeader.minutes} minutes</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Own Goals</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{own_goalsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{own_goalsLeader.own_goals}</span>
                                                    </div>
                                                </div>
                                                <div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Pens Missed</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{penalties_missedLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{penalties_missedLeader.penalties_missed}</span>
                                                    </div>
                                                </div><div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Red Cards</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{red_cardsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{red_cardsLeader.red_cards}</span>
                                                    </div>
                                                </div><div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Saves</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{savesLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{savesLeader.saves}</span>
                                                    </div>
                                                </div><div style={{ margin: '10px', display: 'inline' }}>
                                                    <div className={"sub"} style={{ padding: '0px' }}>
                                                        <span className="pointSpan" style={{ borderColor: '1px solid black', backgroundColor: 'green', color: 'white', padding: '4px' }}>Most Yellow Cards</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{yellow_cardsLeader.teamName}</span>
                                                        <span className="pointSpan" style={{ padding: '4px' }}>{yellow_cardsLeader.yellow_cards}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        }

                                        {arrayOfScores.length > 1 && arrayOfScores.length >= leagueLength &&
                                            <table className="table">
                                                <thead>
                                                    <tr>
                                                        <th style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Rank</th>
                                                        <th style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Manager</th>
                                                        <th onClick={e => this.onSort(e, 'points')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Points</th>
                                                        <th onClick={e => this.onSort(e, 'scored')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Goals Scored</th>
                                                        <th onClick={e => this.onSort(e, 'assists')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Assists</th>
                                                        <th onClick={e => this.onSort(e, 'bonus')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Bonus Points</th>
                                                        <th onClick={e => this.onSort(e, 'clean_sheets')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Clean Sheets</th>
                                                        <th onClick={e => this.onSort(e, 'goals_conceded')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Goals Conceded</th>
                                                        <th onClick={e => this.onSort(e, 'minutes')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Minutes</th>
                                                        <th onClick={e => this.onSort(e, 'own_goals')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Own Goals</th>
                                                        <th onClick={e => this.onSort(e, 'penalties_missed')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Pens Missed</th>
                                                        <th onClick={e => this.onSort(e, 'penalties_saved')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Pens Saved</th>
                                                        <th onClick={e => this.onSort(e, 'red_cards')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Reds</th>
                                                        <th onClick={e => this.onSort(e, 'yellow_cards')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Yellows</th>
                                                        <th onClick={e => this.onSort(e, 'benchPoints')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Points benched</th>
                                                        <th onClick={e => this.onSort(e, 'value')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Value</th>
                                                        <th onClick={e => this.onSort(e, 'transfers')} style={{ cursor: 'pointer', 'box-shadow': 'inset 0 -3px 0 0 green', fontSize: '12px' }}>Transfers made</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {arrayOfScores.map(function (account, index) {
                                                        return (
                                                            <tr key={index} data-item={account}>
                                                                <td data-title="Rank">{index + 1}</td>
                                                                <td data-title="Scored">{account.teamName}</td>
                                                                <td data-title="Score">{account.points}</td>
                                                                <td data-title="Score">{account.scored}</td>
                                                                <td data-title="Score">{account.assists}</td>
                                                                <td data-title="Score">{account.bonus}</td>
                                                                <td data-title="Score">{account.clean_sheets}</td>
                                                                <td data-title="Score">{account.goals_conceded}</td>
                                                                <td data-title="Score">{account.minutes}</td>
                                                                <td data-title="Score">{account.own_goals}</td>
                                                                <td data-title="Score">{account.penalties_missed}</td>
                                                                <td data-title="Score">{account.penalties_saved}</td>
                                                                <td data-title="Score">{account.red_cards}</td>
                                                                <td data-title="Score">{account.yellow_cards}</td>
                                                                <td data-title="Score">{account.benchPoints}</td>
                                                                <td data-title="Score">{account.value}</td>
                                                                <td data-title="Score">{account.transfers}</td>
                                                            </tr>
                                                        );
                                                    })}
                                                </tbody>
                                            </table>
                                        }

                                    </div>
                                )
                            }
                        }

                        });

                        ReactDOM.render(
                            <WhatIf />,
                            document.getElementById('root')
                        );
                        </script>
                    </pre>
                </div>
            </div>
        </section>

        <footer
            id="footer" class="clearfix" role="contentinfo">
        </footer>

    </body>
</html>
